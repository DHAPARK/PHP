a는 파일이없으면 만든다.

http://192.168.8.36

데이터베이스가 생기기전엔 file로 처리를 하곤했음

메모리에 올린거는 컴퓨터 파워가 꺼지면 없어지기때문에
영구적으로 ㅈ장할 필요가 있는것들은 fileㅔ에 저장이 필요했었다
중복데이터 처리하는게어려웠고 

-----------------------
데이터 베이스 (DataBase)
저장소, 데이터를 통합하여 관리하는 집합체를 의미합니다.
데이터베이스 관리 시스템 (DataBase Management System)
보통 dbms라고 함 줄여서
데이터베이스를 관리해주는 소프트웨어를 말합니다.

https://db-engines.com/en/

데이터 베이스를 사용하는 이유
-중복된 데이터를 없애고,자료를 구조화시키고,
효율적인 처리를 할 수 있도록 관리합니다.
-다양한 프로그램을사용하는 사용자들과 데이터를 공유할 수 있기 때문에

mysql을 수업에서 쓸거다

https://www.mysql.com/downloads/

커뮤니티 서버 다운로드
윈도우용 64비트 installer MSI 다운로드 goto download가있음

32비트짜리 405.2짜리 다운로드
no thanks,just start my download;

mysql설치하는이유가 데이터베이스를 저장할 서버를설치해야하기때문
클라이언트는 뭐냐면 서버에 연결하여 사용할수있는 툴을 말하는거

MYSQL은 포트를 3306 을 쓴다는걸 기억
MARIA랑 모든게 똑같음 포트번호도 똑같고
뭐일단 영상있음

MYSQL이 8점대로 버전이 바뀌면서 MYSQL은 5점대버전과 8점대버전을 사용하고있는데
이게 버전이 8점대가 새롭게 소스코드를 바까만든앤데 아이디 비번을 뭐 하는게 좀 바꼇는데
지금우리 PHP같은경우엔 옛날부터 있던언어라 MYSQL을 8점대로 설치를하면 비번아이디같은게
안먹히게됨
그래서 밑에껄 사용해야함 영상있음
비번 1234

윈도우서비스엔 mysql80 으로 저장됨
모든건 영상으로 저장됨

cmd창 뜨고 홈페이지 하나뜨고 정지

mysql work벤치라는 걸 사용해서 명령어를 공부할건데
database를 다룰수있는 언어를 공붛라것
php 백앤드를 구성하는 언어

SQL(Structured Query Language)
질의언어(질문하면 답해주고 x100) 이러는언어
데이터베이스에서 데이터를 정의,조작,제어하기 위해 사용하는 언어입니다.
-대소문자를 구별하지 않습니다.
-문자열을 저장할 때 반드시 쌍따옴표를 무조건!!!이용하면 안된다!!! ''(따옴표) 그냥 따옴표만 사용한다.!@#@!#!

데이터베이스라는 이 전체집합체가 함수도있고 사용자도있고 뭐 별거다모아놓은다 보면된다
db랑 먼저 연동을 할라하면 db를 먼저 만들어야하ㅏㄴ다.

워크벤치 dbs랑 연동만 한 상태인데 데이타베이스를 만들어줘야한다.

dbms에 SQL이라는 명령어로 DB를 만든다

주석은 --   이거 두개가 주석임 이제
실행 = 컨트롤 엔터

데이터베이스를 저장할건데 어떤 형식으로 저장할지 schemas 

스키마? 스킬라? 클릭 피스레쉬 얼

위 3개 시스템데이타베이스 건들면안되는거

밑3개도 사용할필요없고
우리가만든데이타베이스 phpstudy를 써줌

삭제한번해보자

없어진걸 볼수있다.

데이터가 실제로 저장되는곳은 테이블이라는곳에 저장되게 되어있음

테이블은 어떤식으로 저장이 되냐면
데이터베이스가 더군다나 rdbs? 는 오라클이나 mysql 등등은 다 똑같이
엑셀방식으로 저장이된다.

저장되는 엑셀같은 공간을 테이블이라 하고
이러한 저장방식을 스키마라고 한다

-- 데이터베이스 생성
-- create database 데이터 베이스명
create database phpstudy;

-- 데이터베이스 확인 
show databases;

-- 데이터베이스 삭제alter
-- DROP DATABASE 데이터베이스명
drop database phpstudy;

-- table(테이블)
-- 데이터를 행과 열로 스키마에 따라 저장할 수 있는 구조를 말합니다.
-- 행과 열구조로 저장한다했음!
-- 데이타베이스는 행과 열이라 말하지않고 
-- 보통 행을 (데이터가 들어가있는) : row라고 부르고또는record라고 부르고,또는 tuple이라고도 부른다
-- 열은 : field라고 보통 얘기하고, column이라고도 하고,attribute 라고도 하고 함


-------------------------------------------------------------------------------
-- 데이터베이스 생성
-- create database 데이터 베이스명
create database phpstudy;

-- 데이터베이스 확인 
show databases;

-- 데이터베이스 삭제alter
-- DROP DATABASE 데이터베이스명
drop database phpstudy;

-- 데이터 베이스 확인 
-- 데이터베이스를 만들긴해서 있긴한데 지금 테이블을 만들려고 보니까 어디다 만들려는거야
-- phpstudy에 만들라는거야 어디에만들라는거야 모르니까
-- USE 데이터베이스이름 이렇게 써주게되면 해당 데이터베이스를 선택할수있게됩니다.
use phpstudy;


-- table(테이블)
-- 데이터를 행과 열로 스키마에 따라 저장할 수 있는 구조를 말합니다.
-- 행과 열구조로 저장한다했음!
-- 데이타베이스는 행과 열이라 말하지않고 
-- 보통 행을 (데이터가 들어가있는) : row라고 부르고또는record라고 부르고,또는 tuple이라고도 부른다
-- 열은 : field라고 보통 얘기하고, column이라고도 하고,attribute 라고도 하고 함

-- * 스키마에대해 이야기하자면
-- 데이터베이스의 구조와 제약 조건에 관한 명세를 기술한 집합을 의미합니다.
-- 어떻게만들어졌니? 하는 구조를 얘기해주는 것
-- 테이블 만들기
-- 테이블을 만들때는 create table 테이블명 (
-- 필드이름1 필드타입 제약조건,
-- 필드이름2 필드타입 제약조건,
-- 이런식으로  쭉 ~~
-- 마지막에 닫아주고 ) 이렇게 만든다.

-- 이게 무슨뜻이냐면 엑셀같은 테이블을 만들건데
-- 거기에 field이름을 만든다 (번호) (비번) 이렇게 근데
-- 여기에 저장될 타입 숫자냐 날짜냐 뭐 문자냐? 이런걸 알려주는것
-- 그 뒤에 제약조건은 뭐냐면 그 field에 들어갈때 쓸모없는 데이터가
-- 못들어가게 해주는거 공백이 드가면안되 뭐 아예 안쓰면안돼 뭐 format이 드가야해
-- 이렇게 타입과 제약조건을 주는것이다.
-- 이 뭐가들어갈수 있는지 데이터타입부터 공부해보자면
-- 첫번쨰로 숫자타입이 있다.
-- 정수형 : (인티저가 가장 속도가 빠름 하지만 내가 쓸 int값이 21억을 넘는다하면 bigint 를 쓰면됨)tinyint, smallint, mediumint, int,bigint 이런식으로 ......
-- 소수형 : float,double (float는 소숫점6번쨰자리까지 커버 가능하지만 double로
-- 사용하는게 속도도 더 빠르고 무한대로 넣을수 있기떔에 걍 double를 쓰면됨)
-- create table member() <- 만약 이안에 회원번호를 넣을라한다?
-- 나는 회원이 21억명이 넘을거같다 하면
-- num bigint << 이렇게 써주란거다 column이름을 만들고 datatype 를 bigint로 써줘라 이거임
-- userid를 저장할건데 얜 문자야 하면 varchar(20) 뭐 스무자까지 쓸수있어 일케만드는거
-- 두번째는 2. 문자열 타입을 좀 보도록함
-- 3가지로 나눠지는데
-- 텍스트: char,varchar,text 이렇게 있다 얘네의 차이는 char vs varchar
-- char(5) 이렇게쓰고 varchar(20) 이렇게 씀 5바이트,20바이트 5자까지 20자까지
-- 한글은 dbms에선 2바이트  데이터를 저장할때 여기 아이디에다가
-- 아이디를 만들어낼때 varchar(20)이라고 쓰면 스무자까지 드간다는건데
-- 21자를 넣어버리면 에러가 난다. char하고 varchar의 차이는 
-- char로 20자를 써놓고 varchar로 20자를 써놓으면
-- char은 5자를 써놓으면 나머지 15자리도 꽉 채워진다 쓰레기값으로?
-- 근데 varchar을 쓰면 5자를 쓰면 알아서 쪼그라든다 공간낭비적인 면에서 이긴다.
-- varchar은 거의한 4만자쯤 저장가능 몇만자 될거같다하면 text를 쓰면된다.alter
-- 성경책도 저장가능하다함 넓이가 되게넓음 text
-- 
-- 바이너리: binary, varbinary가 있는데   1은 낭비x 2는 낭비가됨
-- 바이너리는 진짜 바이너리 이미지나 동영상이나 이런것들이 저장되는애들
-- 데이터베이스에 파일을 저장할떄 이미지나 동영상같은걸 저장하는일이 많을까?
-- 우리가 게시판에 글쓸때 이미지나 동영상 올리곤 하잖아
-- 데이터베이스에는 파일을 저장할일이 거의없다.
-- 왤까
-- 어떻게 저장하냐면 예를들어 물론 경우에따라서 조금다른데
-- 사용자가 있으면 게시판 글쓰는게있으면 file을 젖장할수있게 하나 만들면
-- 게시판에 글을 쓰고 file을 업로드할라고 이미지를 찾고 전송버튼을 누르면
-- 서버에서 데이터를 일단 받고 id가뭐고 ~ 타이틀이뭐고 내용이뭐고~ 받은다음에
-- 파일을 넘겨받으면 우째하냐면 데이터베이스에 넣는게아니라 특정폴더를 만들어서
-- 동셩상이나 뭐 파일을 서버폴더에 저장을한다 여기이는 파일이름을
-- db에다가 저장하는거임 예를들어 사진을 저장한다고 필드를 만들면
-- 엑셀같은 저장공간에다가alter-
-- ㄱ럼 사진이 저장되는게아니라
-- file명을 저장해가지고 db에있는 파일이름을 찾아가지고
-- 그 폴더에 가가지고 찾아오는거임
-- 그래서 db에는 뭐 저런것들이 저장될 일이 없음
-- 그래서 binary같은걸 쓸일이 거의없다.
-- 몽고디비같은걸 사용하는이유가 글자만 가능한데 왜쓰지?가아니라
-- 보통 데이터베이스에 이런게 저장이안되기때문에 많이쓰는거 빠르기도하고
-- 바이너리는 코드의 집합인데 사실 css할떄도 말했었는데
-- 이미지같은걸 여러오볌ㄴ 점응ㄹ 표현하는 코드들(위치값 색상값) 로 이루어져있는데
-- 음악이나 동영상도 마찬가지임 
-- 그러면 얘네들이 같은ㅈ ㅣ 비교하기 위해서는
-- 그안에 코드들을 비교하기 위해서면 db에 담아서 비교할떄도 이다
-- 네이버같은데에 음악검색을 해보면 음악검색이 만약에 커피숍을갔는데
-- 음악ㅇ이나오고이으면 어 이음악 괜찮은데하고
-- 폰에 들력주기만하면 음악을 찾아주는데
-- 이게 그런거임 데이터베이스에 코드가 들어가있기때문에
-- 그 일부를 네이버 db에 넣어서 검색해서 보여주는거임 이때
-- binary 를 쓴다.
-- dbms에서 바이너리를 이럴때말고는 저장할 이유도없고 ㅇㅇㅇ암튼그럼

-- 열거: enum
-- 얜 뭐냐면 특정 데이터를 미리 선언해두고
-- 그중 안에서만 선택할수 있는것
-- ex) enum('사과','바나나','오렌지','메론') 이 칸에드갈수있는 데이터는
-- 얘네밖에 못드간다는거임
-- 다른말을 집어넣고싶어도 정해져있으니 못드감
-- 예를들어 성별이란걸 만들어두고 
-- enum('male','female') 일케 써놓으면 이 글자들밖에 못드간다는거임
-- man woman 이런거 못들어감 이게 열거형임
-- 이번에는 3번
-- 3. 날짜와 시간타입
-- 날짜 : date
-- 날짜와 시간: datetime,timestamp 
-- 애네들은 날짜를 저장할수있음
-- 근데 굳이 날짜타입이 필요? 문자로 저장하면되지  
-- 날짜라는 field? 를 만들어서 2020-10-25 이렇게하면되지 날짜타입이 필요할까 라고
-- 생각할수 있는데 우리가 사이트를 만들때 이런경우가있다
-- 만약에 예를들어서 멜론이란 사이트를 개발하고이씅면
-- 이사람ㅇ미 결저레르함녀 한달 결제를하면 만료일을 알아야하는데
-- 이로부터 30일정도는 음악을 들을수있게하고 날짜를 게산해줘야하는데
-- 이게 계산하기가 어렵다 . 
-- 문자가지고 날짜계산하기 진짜힘들다.
-- 달이바뀔수도있고 연이바뀔수도있고 쉽지가않다.
-- 근데 날짜타입이 있으면 말그대로 +30만 해주면 날짜가 걍 나와준다.
-- 얘네들응ㄴ 그저 날짜만 저장되는 타입이고
-- datetime 날짜하고 시간까지 저장되는 애고
-- timestamp 1900년도 뭐 언제~ 일케 하면 
-- 예를들어 1970년 1월 1일 0시0분0초 부터 시작해가지고
-- 밀리초 로 계속~~증가하고있는애임 그럼 지금도 계속 증가하고있고
-- 이런애임 예전에는 datatime가 없었을때는 타임스탬프로 게싼을하고했음

-- 제약조건
-- 테이블만들때 3번째에 드가는 제약조건해대해서 알아보자
-- 방금은 field 타입알아본거고
-- 제약조건은 왜하는거냐면 데이터의 무겴을 지키기위해 데이터를 입력받을 때
-- 실행하는 검사규칙입니다.
-- dbms에 관계형데이타라고 얘기하는데 지금우리가 배우고있는 
-- 오라클 mysql maria 뭐이런게 중요하게 여기는게 데이터의 무결성이다
-- 이건 데이터가 잘못되는걸 방지한다는 의미인데
-- 사이트를 잘 만들어놓고 회원가입을 받기시작해쓴ㄴ데
-- 데이터를 잘 확인하고있지않다가 1년뒤에
-- 잘 쌓이고있나~ 하고 열어봤는데alter-
-- 고객감사이벤트같은걸해서 사용자들에게 뭔가 선물을 보낼라고 
-- 데이타베이스를 열었는데 전화번호가 걍 비어있어 그럼 되돌릴수가없다.
-- 이런데이터가 잘못되는걸 방지하자는거임
-- 이 프ㅗ그램이 뭐가조금 잘못됬는지 실명인증을받고 가입을 받았는데
-- 어떤사람은 남자인데 여자로되있어 이러면 데이터가 1개가잘못되어있는게 문제가아니라
-- 다른데이터도 잘못되어있을수가 있다는거임
-- 그럼 이 데이터 못쓰는거임 
-- 요즘 데이터 팔아먹기도하는데 믿을수없는것들이 드가있다하면 가치가없어진다.
-- 그래서 무결성같은걸 지키기위해 주는 검사규칙이다.
-- 차라리 에러가낫지 잘못된게 꾸준히 들어가는건 안된다는거임
-- 제약조건중에 중요한거는
-- 1. NOT NULL : 해당필드에 null값을 넣을수 없다는거임
-- 무슨얘기냐면 이 필드에는 데이타가 무조건 드가야한다는거임
-- 그래ㅐ서 뭐하나 적어보자면 table을 한번 만들어보는데
-- 우리가 배운데가지 써보면
-- create table member(num bigint notnull,
-- userid varchar(20) not null,
-- 2. UNIQUE : 유니크같은 경우는 해당 필드는 서로 다른 값을 가져야 
-- 한다는거임 중복된 값을 저장할 수 없습니다.
-- 근데 단! NULL값을 넣을순 있다.
-- 자 이게 이제 유니크인데 이게 뭔뜻이냐면
-- ID같은겨웅엔 apple이란게있는데 2번 banana가 들어왔는데alter
-- 또 뭔 3번에 apple가 또들어가거나 바나나로 또 가입할수가 있냐?
-- 없다 ㅇㅇ 이럴때쓰는게 유니크다
-- 아이디 필드를 만들었으면 이 필드에는 절대 똑같은게 못드간다 만드는게 유니크
-- create table member(userid varchar(20) unique 얘는 널 값을 넣을수도 alter
-- 있으니까 못넣게할라면 not null을 넣어줘야함 아이디가 null일수는없자나)
-- default : 해당 필드의 기본값을 설정합니다.
-- 만약에 혹시라도 null값이 들어갔을때 대체할 값을 얘기하는것
-- 만약에 내가 데이터를 성별에다가 넣었는데 여자라고 넣었는데 여자는 드가는데

-- 안넣으면 데이터가 null이 되는건데 만약에 gender라는 필드를 만들건데
-- 여기에는 varchar(10)로 열자까지 드가게 해놨어
-- 여기 이렇게만들어놓으면 여자를 넣었을때 여자 뭐 남자도 남자 다드가는데
-- null을 넣어버리면 null이 드가거든?alter
-- 여기다가 default('male') 이렇게 해놓으면 어케되느냐?
-- 남자를 쓰면 남자 잘드가고 여자쓰면 여자 잘드가는데
-- null을 쓰면 걍 기ㅣ본값으로 male 가 드간다는거
-- 4. AUTO_INCREMENT : 해당 필드는 자동으로 숫자가 증가되어 추가됩니다.
-- 따라서 직접 데이터를 추가할 수 없습니다.
-- 얘는 1부터 시작해서 자동으로 데이터가 드감
-- 만약 내가 번호 field를 만들고싶어 그러면
-- create table member(
-- num bigint auto_increment를 적게되면) 이 필드는
-- 내가 데이터를 못넣고 자동으로 한명들오면 1
-- 두번째 들오면 2
-- 세번째 들오면 3 이케댐
-- 이 필드의 유일한 값을 만들고싶을때
-- auto_increment 를 쓴다

-- 5. PRIMARY KEY 뜻이좀많아서
-- 1) 해당 필드는 UNIQUE제약과 NOTNULL제약의 특징을 모두 가집니다.
-- 그니까 unique되면서 notnull까지 다 되는거임?? 무슨말이지
-- 2)해당 field는 테이블에 오직 하나의 필드에만 설정할 수 있습니다.
-- 그러니까 primary키를 등록하는 이 필드는 테이블에 딱 하나만 지정할수있다는거
-- 3) 데이터를 쉽고 빠르게 찾을 수 있도록 도와줍니다.
-- 이게 뭔말이냐면 데이턱 쫙 드가있으면 
-- 우리는 검색을할때 데이터를 다 가꼬와서 검색하는방법도있지만
-- 사이트에서 회원정보 수정버튼을 누르면 페이지가 나올건데
-- 회원정보수정에는 내 기존에 가입했던 정보들이 쭈르르륵나오는데
-- 내가 로그인한 사용자의 정보를 가꼬와서 보여줘야함 그때
-- 이 데이터를 찾을ㄸ ㅐ키가되는 값이 아이디나 회원번호로 찾게됨
-- 이렇게 전체데이터가 1억명이된다하면
-- 그중에서 어떤 특정한사람데이터를 가져올라면 검색해야하는데
-- 그때 속도가 되게느리단말임 근데내가 여따가
-- index를 하나 column에 걸어주면
-- 내가 아이디를 검색할때 되게빨라진다느거임 예를들어 박도현 8번 일케
-- 근데 테이블에 하나만 걸수있슴
-- 4) 외래키가 참조할 수 있도록 만듭니다.
-- 테이블이요 웅리가 프로젝트를하면서 테이블을 여러개 만드는데
-- 회원가입이면 회우너테이블이있을거고 쇼핑하면 쇼핑구입내역 뭐 장바구니~ 여러가지 필요한데
-- 이 텥이블이 각각 따로따로 또 있으면 이걸나중에 연동해서 써야할때가 필요한데
-- 한 화면에 회ㅜ언정보 ,구입한내역 뭐 다보여줘야할때 연동시켜서 보여줘야하는데
-- 그 연관성을 만들어놓고 참조가 가능하게 만들어주는게 이 외래키이다.

-- 6.FOREIGN KEY
--  1) 다른 테이블과 연결해주는 역할을 합니다.
-- 기준이 되는 테이블의 내용을 참조해서 레코드가 (내용이) 입력됩니다.
-- 근까 외래키가 뭐냐면 PRIMARY 키를 참조하는 키를 뜻하는거다
-- 원래 내가 참조하고싶은 테이블 을 뭐 어쩌구...
-- 2)다른 테이블에 의존하는 필드가 됩니다.
-- 3)결론적으로 기본키를 참조합니다(PRIMARY KEY)를 참조합니다.
CREATE TABLE tb_member (
	-- 레코드를 대표하는 아이덴티티한 뭔가 만들려는거임
    -- 테이블을 합칠때 field이름하고 겹치면 안되니까 이름을 확실하게 다르게해야함check
	mem_idx bigint auto_increment primary key,
    -- 이게 기본키가 된다.
    -- mysql특징이 이 컬럼자체를 auto_increment 로 쓸라면 primary keyㄷ ㅗ써줘야함
	mem_userid varchar(20) unique not null,
    mem_userpw varchar(20) not null,
    mem_name varchar(13) not null,
    mem_email varchar(50),
    mem_hobby varchar(100),
    mem_ssn1 char(6) not null,
    mem_ssn2 char(7) not null,
    mem_zipcode char(5) not null,
    mem_address1 varchar(100),
    mem_address2 varchar(100),
    mem_address3 varchar(100),
    -- 회우너가입한 날짜 자동저장
    mem_regdate datetime default now()
    -- 위에 내용이 db에 드간순간! now()발동! 알아서 날짜기입
    -- 여따 테이블/컬럼을 추가하고싶으면
    
);
-- 테이블 필드 추가
-- alter table 테이블명 add 컬럼명 데이터타입 제약조건    제약조건은 기본값이 0이 ㄷ들어가도록 정함
alter table tb_member add member_point int default 0;


-- 테이블 필드 수정
-- alter table 테이블명 modify column 컬렴명 컬럼타입 제약조검
ALTER TABLE TB_MEMBER MODIFY COLUMN mem_address3 varchar(50);


-- 테이블 필드 샂게
-- alter table 테이블명 drop 컬럼명
ALTER TABLE tb_member DROP mem_point;

-- 테이블 구조확인
-- desc 테이블명
desc tb_member;

-- 테이블 삭제
-- drop table 테이블명
drop table tb_member;




create table tb_profile (
	pro_mem_idx bigint,
	pro_age int,
	pro_gender enum('남자','여자'),
	pro_height double,
	pro_weight double,
	pro_birthday datetime,
	foreign key(pro_mem_idx) references tb_member(mem_idx) ON UPDATE CASCADE
    -- foreign 키가 없어지거나 업데이트되면 tb_member(mem_idx)도 업데이트 되도록 on update cascade 써주고 둘이 연동되게 references적어준다
    -- 모두 자료형이 같아야한다.
);
